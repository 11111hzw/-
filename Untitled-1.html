<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‚¸å¼¹å‡å°‘åŠ¨ç”» - çŒœæ•°æ¸¸æˆç­–ç•¥åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1e88e5 0%, #0d47a1 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 900px;
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 20px;
            margin-bottom: 20px;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
            color: #333;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 20px;
        }
        
        .bomb-display {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
            min-height: 200px;
        }
        
        .bomb {
            width: 40px;
            height: 40px;
            background-color: #ff5252;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
            transition: all 0.5s ease;
            font-size: 20px;
        }
        
        .bomb.defused {
            background-color: #4caf50;
            transform: scale(0.7);
            opacity: 0.7;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        button {
            background-color: #4facfe;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
        }
        
        button:hover {
            background-color: #00a1f8;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .strategy-info {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .strategy-card {
            flex: 1;
            min-width: 200px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            border-left: 5px solid #2196f3;
        }
        
        .strategy-card h3 {
            margin-top: 0;
            color: #0d47a1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .strategy-card.slow {
            border-left-color: #f44336;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        }
        
        .strategy-card.fast {
            border-left-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }
        
        .status {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 10px;
            color: #2e7d32;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .doraemon {
            font-size: 60px;
            text-align: center;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .counter {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            font-size: 18px;
        }
        
        .counter-item {
            background: rgba(33, 150, 243, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            min-width: 120px;
            text-align: center;
        }
        
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .auto-play {
            background-color: #ff9800;
        }
        
        .auto-play:hover {
            background-color: #f57c00;
        }
        
        @media (max-width: 768px) {
            .strategy-info {
                flex-direction: column;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .subtitle {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="doraemon">ğŸ¤–</div>
        <h1>ğŸ’£ çŒœæ•°æ¸¸æˆç‚¸å¼¹å‡å°‘åŠ¨ç”»</h1>
        <div class="subtitle">çœ‹çœ‹å“ªç§ç­–ç•¥èƒ½æœ€å¿«æ‹†é™¤æ‰€æœ‰ç‚¸å¼¹ï¼</div>
    </div>

    <div class="container">
        <div class="counter">
            <div class="counter-item">å‰©ä½™ç‚¸å¼¹: <span id="bombCount">100</span></div>
            <div class="counter-item">æé—®æ¬¡æ•°: <span id="questionCount">0</span></div>
            <div class="counter-item">å½“å‰ç­–ç•¥: <span id="currentStrategy">å¿«é€Ÿç­–ç•¥</span></div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="status" id="status">
            å‡†å¤‡å¼€å§‹æ‹†å¼¹ä»»åŠ¡ï¼
        </div>
        
        <div class="chart-container">
            <canvas id="bombChart"></canvas>
        </div>
        
        <div class="bomb-display" id="bombDisplay">
            <!-- ç‚¸å¼¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="controls">
            <button id="fastBtn">å¿«é€Ÿç­–ç•¥ï¼ˆäºŒåˆ†æ³•ï¼‰</button>
            <button id="mediumBtn">ä¸­é€Ÿç­–ç•¥ï¼ˆä¸‰åˆ†æ³•ï¼‰</button>
            <button id="slowBtn">æ…¢é€Ÿç­–ç•¥ï¼ˆç›²ç›®çŒœï¼‰</button>
            <button id="autoPlayBtn" class="auto-play">è‡ªåŠ¨æ’­æ”¾æ‰€æœ‰ç­–ç•¥</button>
            <button id="resetBtn">é‡ç½®</button>
        </div>
    </div>

    <div class="container">
        <h2>ç­–ç•¥è¯´æ˜</h2>
        <div class="strategy-info">
            <div class="strategy-card fast">
                <h3>ğŸš€ å¿«é€Ÿç­–ç•¥ï¼ˆäºŒåˆ†æ³•ï¼‰</h3>
                <p>æ¯æ¬¡é—®"æ¯”ä¸­é—´æ•°å¤§å—ï¼Ÿ"</p>
                <p>ğŸ’¥ æ¯æ¬¡èƒ½æ‹†æ‰çº¦ä¸€åŠç‚¸å¼¹</p>
                <p>â­ 100é¢—ç‚¸å¼¹æœ€å¤šéœ€è¦7æ¬¡</p>
                <p>ğŸ¯ æ¨èä½¿ç”¨ï¼</p>
            </div>
            <div class="strategy-card">
                <h3>ğŸ¢ ä¸­é€Ÿç­–ç•¥ï¼ˆä¸‰åˆ†æ³•ï¼‰</h3>
                <p>æŠŠç‚¸å¼¹åˆ†æˆä¸‰ç»„æé—®</p>
                <p>ğŸ’¥ æ¯æ¬¡èƒ½æ‹†æ‰çº¦1/3ç‚¸å¼¹</p>
                <p>â­ 100é¢—ç‚¸å¼¹éœ€è¦10æ¬¡å·¦å³</p>
                <p>ğŸ¤” å¯ä»¥è¯•è¯•çœ‹</p>
            </div>
            <div class="strategy-card slow">
                <h3>ğŸŒ æ…¢é€Ÿç­–ç•¥ï¼ˆç›²ç›®çŒœï¼‰</h3>
                <p>éšä¾¿çŒœä¸€ä¸ªæ•°å­—</p>
                <p>ğŸ’¥ æ¯æ¬¡åªèƒ½æ‹†æ‰1é¢—ç‚¸å¼¹</p>
                <p>â­ 100é¢—ç‚¸å¼¹éœ€è¦50æ¬¡ä»¥ä¸Š</p>
                <p>âŒ ä¸æ¨èä½¿ç”¨</p>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–å›¾è¡¨
        const ctx = document.getElementById('bombChart').getContext('2d');
        let bombChart;
        
        // ç­–ç•¥æ•°æ®
        const strategies = {
            fast: {
                name: "å¿«é€Ÿç­–ç•¥ï¼ˆäºŒåˆ†æ³•ï¼‰",
                data: [100, 50, 25, 13, 7, 4, 2, 1, 0],
                color: '#4caf50',
                description: "æ¯æ¬¡æ’é™¤çº¦ä¸€åŠçš„ç‚¸å¼¹"
            },
            medium: {
                name: "ä¸­é€Ÿç­–ç•¥ï¼ˆä¸‰åˆ†æ³•ï¼‰",
                data: [100, 67, 45, 30, 20, 14, 10, 7, 5, 3, 1, 0],
                color: '#2196f3',
                description: "æ¯æ¬¡æ’é™¤çº¦1/3çš„ç‚¸å¼¹"
            },
            slow: {
                name: "æ…¢é€Ÿç­–ç•¥ï¼ˆç›²ç›®çŒœï¼‰",
                data: [100, 99, 98, 97, 96, 95, 94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0],
                color: '#f44336',
                description: "æ¯æ¬¡åªèƒ½æ’é™¤1é¢—ç‚¸å¼¹"
            }
        };
        
        // å½“å‰çŠ¶æ€
        let currentStrategy = null;
        let currentStep = 0;
        let isPlaying = false;
        let autoPlayTimeout = null;
        
        // åˆ›å»ºå›¾è¡¨
        function createChart() {
            bombChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['å¼€å§‹'],
                    datasets: [{
                        label: 'å‰©ä½™ç‚¸å¼¹æ•°é‡',
                        data: [100],
                        borderColor: '#4caf50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        borderWidth: 4,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#4caf50',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ç‚¸å¼¹å‡å°‘æƒ…å†µ',
                            font: {
                                size: 20,
                                family: "'Comic Sans MS', cursive"
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `å‰©ä½™${context.parsed.y}é¢—ç‚¸å¼¹`;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æé—®æ¬¡æ•°',
                                font: {
                                    family: "'Comic Sans MS', cursive"
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'å‰©ä½™ç‚¸å¼¹æ•°é‡',
                                font: {
                                    family: "'Comic Sans MS', cursive"
                                }
                            },
                            min: 0,
                            max: 100
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }
        
        // åˆ›å»ºç‚¸å¼¹æ˜¾ç¤º
        function createBombDisplay() {
            const bombDisplay = document.getElementById('bombDisplay');
            bombDisplay.innerHTML = '';
            
            const bombCount = currentStrategy ? currentStrategy.data[currentStep] : 100;
            const totalBombs = 100;
            const bombsPerRow = 10;
            const rows = Math.ceil(totalBombs / bombsPerRow);
            
            for (let i = 0; i < rows; i++) {
                const row = document.createElement('div');
                row.style.display = 'flex';
                row.style.justifyContent = 'center';
                row.style.gap = '8px';
                row.style.marginBottom = '8px';
                
                for (let j = 0; j < bombsPerRow; j++) {
                    const bombIndex = i * bombsPerRow + j;
                    const bomb = document.createElement('div');
                    bomb.className = 'bomb';
                    
                    if (bombIndex < bombCount) {
                        bomb.textContent = 'ğŸ’£';
                        bomb.style.backgroundColor = '#ff5252';
                    } else {
                        bomb.textContent = 'âœ…';
                        bomb.className = 'bomb defused';
                    }
                    
                    row.appendChild(bomb);
                }
                
                bombDisplay.appendChild(row);
            }
            
            // æ›´æ–°è®¡æ•°å™¨
            document.getElementById('bombCount').textContent = bombCount;
            document.getElementById('questionCount').textContent = currentStep;
            document.getElementById('currentStrategy').textContent = currentStrategy ? currentStrategy.name : 'æœªé€‰æ‹©';
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((100 - bombCount) / 100 * 100).toFixed(0);
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        // å¼€å§‹ç­–ç•¥æ¼”ç¤º
        function startStrategy(strategyKey) {
            if (isPlaying) return;
            
            currentStrategy = strategies[strategyKey];
            currentStep = 0;
            isPlaying = true;
            
            // æ›´æ–°çŠ¶æ€
            document.getElementById('status').textContent = `å¼€å§‹ä½¿ç”¨${currentStrategy.name}ï¼`;
            document.getElementById('status').style.backgroundColor = '#e8f5e9';
            document.getElementById('status').style.color = '#2e7d32';
            
            // é‡ç½®å›¾è¡¨
            bombChart.data.labels = ['å¼€å§‹'];
            bombChart.data.datasets[0].data = [100];
            bombChart.data.datasets[0].borderColor = currentStrategy.color;
            bombChart.data.datasets[0].backgroundColor = currentStrategy.color + '20';
            bombChart.update();
            
            // å¼€å§‹åŠ¨ç”»
            playNextStep();
        }
        
        // æ’­æ”¾ä¸‹ä¸€æ­¥
        function playNextStep() {
            if (!isPlaying || !currentStrategy) return;
            
            if (currentStep < currentStrategy.data.length - 1) {
                currentStep++;
                
                // æ›´æ–°å›¾è¡¨
                bombChart.data.labels.push(`ç¬¬${currentStep}æ¬¡`);
                bombChart.data.datasets[0].data.push(currentStrategy.data[currentStep]);
                bombChart.update();
                
                // æ›´æ–°ç‚¸å¼¹æ˜¾ç¤º
                createBombDisplay();
                
                // æ›´æ–°çŠ¶æ€
                const bombsLeft = currentStrategy.data[currentStep];
                const bombsRemoved = 100 - bombsLeft;
                
                if (bombsLeft > 0) {
                    document.getElementById('status').textContent = 
                        `ç¬¬${currentStep}æ¬¡æé—®åï¼Œæ‹†é™¤äº†${bombsRemoved}é¢—ç‚¸å¼¹ï¼Œå‰©ä½™${bombsLeft}é¢—ï¼`;
                    
                    // è®¾ç½®ä¸‹ä¸€æ­¥çš„å»¶è¿Ÿ
                    let delay = 1500;
                    if (currentStrategy === strategies.slow && currentStep > 10) {
                        delay = 300; // æ…¢é€Ÿç­–ç•¥åæœŸåŠ å¿«é€Ÿåº¦
                    }
                    
                    setTimeout(playNextStep, delay);
                } else {
                    document.getElementById('status').textContent = 
                        `ğŸ‰ æ­å–œï¼ä½¿ç”¨${currentStrategy.name}æˆåŠŸæ‹†é™¤äº†æ‰€æœ‰ç‚¸å¼¹ï¼å…±ç”¨äº†${currentStep}æ¬¡æé—®ã€‚`;
                    document.getElementById('status').style.backgroundColor = '#4caf50';
                    document.getElementById('status').style.color = 'white';
                    isPlaying = false;
                }
            } else {
                isPlaying = false;
            }
        }
        
        // è‡ªåŠ¨æ’­æ”¾æ‰€æœ‰ç­–ç•¥
        function autoPlayAll() {
            if (isPlaying) return;
            
            // å…ˆé‡ç½®
            resetDemo();
            
            // å»¶è¿Ÿå¼€å§‹è‡ªåŠ¨æ’­æ”¾
            setTimeout(() => {
                autoPlayStrategy('fast');
            }, 1000);
        }
        
        // è‡ªåŠ¨æ’­æ”¾å•ä¸ªç­–ç•¥
        function autoPlayStrategy(strategyKey) {
            if (autoPlayTimeout) {
                clearTimeout(autoPlayTimeout);
            }
            
            startStrategy(strategyKey);
            
            // è®¡ç®—è¿™ä¸ªç­–ç•¥éœ€è¦çš„æ—¶é—´ï¼ˆç²—ç•¥ä¼°è®¡ï¼‰
            let delay = strategies[strategyKey].data.length * 1500 + 2000;
            
            if (strategyKey === 'slow') {
                delay = 5000; // æ…¢é€Ÿç­–ç•¥åªæ’­æ”¾ä¸€éƒ¨åˆ†
            }
            
            // æ’­æ”¾ä¸‹ä¸€ä¸ªç­–ç•¥
            autoPlayTimeout = setTimeout(() => {
                if (strategyKey === 'fast') {
                    autoPlayStrategy('medium');
                } else if (strategyKey === 'medium') {
                    autoPlayStrategy('slow');
                } else {
                    // æ‰€æœ‰ç­–ç•¥æ’­æ”¾å®Œæ¯•
                    document.getElementById('status').textContent = 
                        "æ‰€æœ‰ç­–ç•¥æ¼”ç¤ºå®Œæ¯•ï¼å¿«é€Ÿç­–ç•¥ï¼ˆäºŒåˆ†æ³•ï¼‰æ˜æ˜¾æ˜¯æœ€æœ‰æ•ˆçš„ï¼";
                    document.getElementById('status').style.backgroundColor = '#ff9800';
                    document.getElementById('status').style.color = 'white';
                }
            }, delay);
        }
        
        // é‡ç½®æ¼”ç¤º
        function resetDemo() {
            isPlaying = false;
            currentStrategy = null;
            currentStep = 0;
            
            if (autoPlayTimeout) {
                clearTimeout(autoPlayTimeout);
                autoPlayTimeout = null;
            }
            
            // é‡ç½®å›¾è¡¨
            bombChart.data.labels = ['å¼€å§‹'];
            bombChart.data.datasets[0].data = [100];
            bombChart.data.datasets[0].borderColor = '#4caf50';
            bombChart.data.datasets[0].backgroundColor = 'rgba(76, 175, 80, 0.1)';
            bombChart.update();
            
            // é‡ç½®ç‚¸å¼¹æ˜¾ç¤º
            createBombDisplay();
            
            // é‡ç½®çŠ¶æ€
            document.getElementById('status').textContent = "å‡†å¤‡å¼€å§‹æ‹†å¼¹ä»»åŠ¡ï¼";
            document.getElementById('status').style.backgroundColor = '#e8f5e9';
            document.getElementById('status').style.color = '#2e7d32';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = function() {
            createChart();
            createBombDisplay();
            
            // æ·»åŠ æŒ‰é’®äº‹ä»¶ç›‘å¬
            document.getElementById('fastBtn').addEventListener('click', () => startStrategy('fast'));
            document.getElementById('mediumBtn').addEventListener('click', () => startStrategy('medium'));
            document.getElementById('slowBtn').addEventListener('click', () => startStrategy('slow'));
            document.getElementById('autoPlayBtn').addEventListener('click', autoPlayAll);
            document.getElementById('resetBtn').addEventListener('click', resetDemo);
            
            // 3ç§’åè‡ªåŠ¨å¼€å§‹å¿«é€Ÿç­–ç•¥æ¼”ç¤º
            setTimeout(() => {
                if (!isPlaying) {
                    document.getElementById('status').textContent = "3ç§’åå¼€å§‹æ¼”ç¤ºå¿«é€Ÿç­–ç•¥ï¼ˆäºŒåˆ†æ³•ï¼‰...";
                    setTimeout(() => startStrategy('fast'), 3000);
                }
            }, 1000);
        };
    </script>
</body>
</html>
