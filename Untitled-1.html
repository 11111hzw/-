<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>炸弹减少动画 - 猜数游戏策略分析</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1e88e5 0%, #0d47a1 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 900px;
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 20px;
            margin-bottom: 20px;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
            color: #333;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 20px;
        }
        
        .bomb-display {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
            min-height: 200px;
        }
        
        .bomb {
            width: 40px;
            height: 40px;
            background-color: #ff5252;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
            transition: all 0.5s ease;
            font-size: 20px;
        }
        
        .bomb.defused {
            background-color: #4caf50;
            transform: scale(0.7);
            opacity: 0.7;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        button {
            background-color: #4facfe;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
        }
        
        button:hover {
            background-color: #00a1f8;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .strategy-info {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .strategy-card {
            flex: 1;
            min-width: 200px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            border-left: 5px solid #2196f3;
        }
        
        .strategy-card h3 {
            margin-top: 0;
            color: #0d47a1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .strategy-card.slow {
            border-left-color: #f44336;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        }
        
        .strategy-card.fast {
            border-left-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }
        
        .status {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 10px;
            color: #2e7d32;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .doraemon {
            font-size: 60px;
            text-align: center;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .counter {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            font-size: 18px;
        }
        
        .counter-item {
            background: rgba(33, 150, 243, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            min-width: 120px;
            text-align: center;
        }
        
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .auto-play {
            background-color: #ff9800;
        }
        
        .auto-play:hover {
            background-color: #f57c00;
        }
        
        @media (max-width: 768px) {
            .strategy-info {
                flex-direction: column;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .subtitle {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="doraemon">🤖</div>
        <h1>💣 猜数游戏炸弹减少动画</h1>
        <div class="subtitle">看看哪种策略能最快拆除所有炸弹！</div>
    </div>

    <div class="container">
        <div class="counter">
            <div class="counter-item">剩余炸弹: <span id="bombCount">100</span></div>
            <div class="counter-item">提问次数: <span id="questionCount">0</span></div>
            <div class="counter-item">当前策略: <span id="currentStrategy">快速策略</span></div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="status" id="status">
            准备开始拆弹任务！
        </div>
        
        <div class="chart-container">
            <canvas id="bombChart"></canvas>
        </div>
        
        <div class="bomb-display" id="bombDisplay">
            <!-- 炸弹将通过JavaScript动态生成 -->
        </div>
        
        <div class="controls">
            <button id="fastBtn">快速策略（二分法）</button>
            <button id="mediumBtn">中速策略（三分法）</button>
            <button id="slowBtn">慢速策略（盲目猜）</button>
            <button id="autoPlayBtn" class="auto-play">自动播放所有策略</button>
            <button id="resetBtn">重置</button>
        </div>
    </div>

    <div class="container">
        <h2>策略说明</h2>
        <div class="strategy-info">
            <div class="strategy-card fast">
                <h3>🚀 快速策略（二分法）</h3>
                <p>每次问"比中间数大吗？"</p>
                <p>💥 每次能拆掉约一半炸弹</p>
                <p>⭐ 100颗炸弹最多需要7次</p>
                <p>🎯 推荐使用！</p>
            </div>
            <div class="strategy-card">
                <h3>🐢 中速策略（三分法）</h3>
                <p>把炸弹分成三组提问</p>
                <p>💥 每次能拆掉约1/3炸弹</p>
                <p>⭐ 100颗炸弹需要10次左右</p>
                <p>🤔 可以试试看</p>
            </div>
            <div class="strategy-card slow">
                <h3>🐌 慢速策略（盲目猜）</h3>
                <p>随便猜一个数字</p>
                <p>💥 每次只能拆掉1颗炸弹</p>
                <p>⭐ 100颗炸弹需要50次以上</p>
                <p>❌ 不推荐使用</p>
            </div>
        </div>
    </div>

    <script>
        // 初始化图表
        const ctx = document.getElementById('bombChart').getContext('2d');
        let bombChart;
        
        // 策略数据
        const strategies = {
            fast: {
                name: "快速策略（二分法）",
                data: [100, 50, 25, 13, 7, 4, 2, 1, 0],
                color: '#4caf50',
                description: "每次排除约一半的炸弹"
            },
            medium: {
                name: "中速策略（三分法）",
                data: [100, 67, 45, 30, 20, 14, 10, 7, 5, 3, 1, 0],
                color: '#2196f3',
                description: "每次排除约1/3的炸弹"
            },
            slow: {
                name: "慢速策略（盲目猜）",
                data: [100, 99, 98, 97, 96, 95, 94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0],
                color: '#f44336',
                description: "每次只能排除1颗炸弹"
            }
        };
        
        // 当前状态
        let currentStrategy = null;
        let currentStep = 0;
        let isPlaying = false;
        let autoPlayTimeout = null;
        
        // 创建图表
        function createChart() {
            bombChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['开始'],
                    datasets: [{
                        label: '剩余炸弹数量',
                        data: [100],
                        borderColor: '#4caf50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        borderWidth: 4,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#4caf50',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '炸弹减少情况',
                            font: {
                                size: 20,
                                family: "'Comic Sans MS', cursive"
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `剩余${context.parsed.y}颗炸弹`;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '提问次数',
                                font: {
                                    family: "'Comic Sans MS', cursive"
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '剩余炸弹数量',
                                font: {
                                    family: "'Comic Sans MS', cursive"
                                }
                            },
                            min: 0,
                            max: 100
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }
        
        // 创建炸弹显示
        function createBombDisplay() {
            const bombDisplay = document.getElementById('bombDisplay');
            bombDisplay.innerHTML = '';
            
            const bombCount = currentStrategy ? currentStrategy.data[currentStep] : 100;
            const totalBombs = 100;
            const bombsPerRow = 10;
            const rows = Math.ceil(totalBombs / bombsPerRow);
            
            for (let i = 0; i < rows; i++) {
                const row = document.createElement('div');
                row.style.display = 'flex';
                row.style.justifyContent = 'center';
                row.style.gap = '8px';
                row.style.marginBottom = '8px';
                
                for (let j = 0; j < bombsPerRow; j++) {
                    const bombIndex = i * bombsPerRow + j;
                    const bomb = document.createElement('div');
                    bomb.className = 'bomb';
                    
                    if (bombIndex < bombCount) {
                        bomb.textContent = '💣';
                        bomb.style.backgroundColor = '#ff5252';
                    } else {
                        bomb.textContent = '✅';
                        bomb.className = 'bomb defused';
                    }
                    
                    row.appendChild(bomb);
                }
                
                bombDisplay.appendChild(row);
            }
            
            // 更新计数器
            document.getElementById('bombCount').textContent = bombCount;
            document.getElementById('questionCount').textContent = currentStep;
            document.getElementById('currentStrategy').textContent = currentStrategy ? currentStrategy.name : '未选择';
            
            // 更新进度条
            const progress = ((100 - bombCount) / 100 * 100).toFixed(0);
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        // 开始策略演示
        function startStrategy(strategyKey) {
            if (isPlaying) return;
            
            currentStrategy = strategies[strategyKey];
            currentStep = 0;
            isPlaying = true;
            
            // 更新状态
            document.getElementById('status').textContent = `开始使用${currentStrategy.name}！`;
            document.getElementById('status').style.backgroundColor = '#e8f5e9';
            document.getElementById('status').style.color = '#2e7d32';
            
            // 重置图表
            bombChart.data.labels = ['开始'];
            bombChart.data.datasets[0].data = [100];
            bombChart.data.datasets[0].borderColor = currentStrategy.color;
            bombChart.data.datasets[0].backgroundColor = currentStrategy.color + '20';
            bombChart.update();
            
            // 开始动画
            playNextStep();
        }
        
        // 播放下一步
        function playNextStep() {
            if (!isPlaying || !currentStrategy) return;
            
            if (currentStep < currentStrategy.data.length - 1) {
                currentStep++;
                
                // 更新图表
                bombChart.data.labels.push(`第${currentStep}次`);
                bombChart.data.datasets[0].data.push(currentStrategy.data[currentStep]);
                bombChart.update();
                
                // 更新炸弹显示
                createBombDisplay();
                
                // 更新状态
                const bombsLeft = currentStrategy.data[currentStep];
                const bombsRemoved = 100 - bombsLeft;
                
                if (bombsLeft > 0) {
                    document.getElementById('status').textContent = 
                        `第${currentStep}次提问后，拆除了${bombsRemoved}颗炸弹，剩余${bombsLeft}颗！`;
                    
                    // 设置下一步的延迟
                    let delay = 1500;
                    if (currentStrategy === strategies.slow && currentStep > 10) {
                        delay = 300; // 慢速策略后期加快速度
                    }
                    
                    setTimeout(playNextStep, delay);
                } else {
                    document.getElementById('status').textContent = 
                        `🎉 恭喜！使用${currentStrategy.name}成功拆除了所有炸弹！共用了${currentStep}次提问。`;
                    document.getElementById('status').style.backgroundColor = '#4caf50';
                    document.getElementById('status').style.color = 'white';
                    isPlaying = false;
                }
            } else {
                isPlaying = false;
            }
        }
        
        // 自动播放所有策略
        function autoPlayAll() {
            if (isPlaying) return;
            
            // 先重置
            resetDemo();
            
            // 延迟开始自动播放
            setTimeout(() => {
                autoPlayStrategy('fast');
            }, 1000);
        }
        
        // 自动播放单个策略
        function autoPlayStrategy(strategyKey) {
            if (autoPlayTimeout) {
                clearTimeout(autoPlayTimeout);
            }
            
            startStrategy(strategyKey);
            
            // 计算这个策略需要的时间（粗略估计）
            let delay = strategies[strategyKey].data.length * 1500 + 2000;
            
            if (strategyKey === 'slow') {
                delay = 5000; // 慢速策略只播放一部分
            }
            
            // 播放下一个策略
            autoPlayTimeout = setTimeout(() => {
                if (strategyKey === 'fast') {
                    autoPlayStrategy('medium');
                } else if (strategyKey === 'medium') {
                    autoPlayStrategy('slow');
                } else {
                    // 所有策略播放完毕
                    document.getElementById('status').textContent = 
                        "所有策略演示完毕！快速策略（二分法）明显是最有效的！";
                    document.getElementById('status').style.backgroundColor = '#ff9800';
                    document.getElementById('status').style.color = 'white';
                }
            }, delay);
        }
        
        // 重置演示
        function resetDemo() {
            isPlaying = false;
            currentStrategy = null;
            currentStep = 0;
            
            if (autoPlayTimeout) {
                clearTimeout(autoPlayTimeout);
                autoPlayTimeout = null;
            }
            
            // 重置图表
            bombChart.data.labels = ['开始'];
            bombChart.data.datasets[0].data = [100];
            bombChart.data.datasets[0].borderColor = '#4caf50';
            bombChart.data.datasets[0].backgroundColor = 'rgba(76, 175, 80, 0.1)';
            bombChart.update();
            
            // 重置炸弹显示
            createBombDisplay();
            
            // 重置状态
            document.getElementById('status').textContent = "准备开始拆弹任务！";
            document.getElementById('status').style.backgroundColor = '#e8f5e9';
            document.getElementById('status').style.color = '#2e7d32';
        }
        
        // 页面加载完成后初始化
        window.onload = function() {
            createChart();
            createBombDisplay();
            
            // 添加按钮事件监听
            document.getElementById('fastBtn').addEventListener('click', () => startStrategy('fast'));
            document.getElementById('mediumBtn').addEventListener('click', () => startStrategy('medium'));
            document.getElementById('slowBtn').addEventListener('click', () => startStrategy('slow'));
            document.getElementById('autoPlayBtn').addEventListener('click', autoPlayAll);
            document.getElementById('resetBtn').addEventListener('click', resetDemo);
            
            // 3秒后自动开始快速策略演示
            setTimeout(() => {
                if (!isPlaying) {
                    document.getElementById('status').textContent = "3秒后开始演示快速策略（二分法）...";
                    setTimeout(() => startStrategy('fast'), 3000);
                }
            }, 1000);
        };
    </script>
</body>
</html>
